{"ast":null,"code":"import axios from \"axios\";\nimport { STATUS_CODE, BASE_URL } from \"./Constants\";\nimport { toast } from \"react-toastify\";\n\n// Request Methods\nconst METHOD = {\n  GET: \"get\",\n  POST: \"post\",\n  PUT: \"put\",\n  DELETE: \"delete\"\n};\n\n/*\n* API controller for handling the request\n*/\nclass API {\n  constructor() {\n    this.isLoggedIn = false;\n    this.userData = {};\n    this.userToken = null;\n    this.baseURL = BASE_URL;\n  }\n  get(url, data) {\n    return new Promise((resolve, reject) => {\n      this.api(METHOD.GET, url, data).then(response => resolve(response)).catch(error => {\n        console.error(\"GET request error:\", error);\n        reject(error);\n      });\n    });\n  }\n  post(url, data) {\n    return new Promise((resolve, reject) => {\n      this.api(METHOD.POST, url, data).then(response => resolve(response)).catch(error => {\n        console.error(\"POST request error:\", error);\n        reject(error);\n      });\n    });\n  }\n  put(url, data) {\n    return new Promise((resolve, reject) => {\n      this.api(METHOD.PUT, url, data).then(response => resolve(response)).catch(error => {\n        console.error(\"PUT request error:\", error);\n        reject(error);\n      });\n    });\n  }\n  delete(url, data) {\n    return new Promise((resolve, reject) => {\n      this.api(METHOD.DELETE, url, data).then(response => resolve(response)).catch(error => {\n        console.error(\"DELETE request error:\", error);\n        reject(error);\n      });\n    });\n  }\n\n  // Main function to hold the axios request params\n  api(method, url, data) {\n    return new Promise((resolve, reject) => {\n      let axiosConfig = {\n        method: method,\n        url: this.baseURL + url,\n        headers: this.setHeaders(data)\n      };\n      if (data) {\n        axiosConfig.data = data;\n      }\n      axios(axiosConfig).then(response => {\n        if (response && response.status === STATUS_CODE.INTERNAL_SERVER_ERROR) {\n          toast.error(\"Something went wrong!!\");\n        } else {\n          resolve(response);\n          // Uncomment if you want to show a success toast\n          // if (response) {\n          //   toast.success(response.data?.messages);\n          // }\n        }\n      }).catch(error => {\n        var _error$response;\n        let err = error === null || error === void 0 ? void 0 : error.response;\n        let errData = error === null || error === void 0 ? void 0 : (_error$response = error.response) === null || _error$response === void 0 ? void 0 : _error$response.data;\n        console.error(\"ERROR\", error);\n\n        // Handle specific errors based on status or error messages\n        if ((err === null || err === void 0 ? void 0 : err.status) === 401) {} else if ((err === null || err === void 0 ? void 0 : err.status) === 422) {\n          console.log(`${error.response.data.errors}`);\n        } else {\n          console.log(\"An error occurred\");\n        }\n        reject(error); // Ensure the error is propagated\n      });\n    });\n  }\n\n  // Set the headers for request\n  setHeaders(data) {\n    let headers = {\n      \"accept-language\": \"en\",\n      \"Content-Type\": \"application/json\",\n      Accept: \"application/json\",\n      Authorization: localStorage.getItem(\"token\")\n    };\n    if (data) {\n      if (data.isMultipart) {\n        headers[\"Content-Type\"] = \"multipart/form-data\";\n      }\n      if (data.headers) {\n        Object.assign(headers, data.headers);\n      }\n    }\n    return headers;\n  }\n}\nexport default API;","map":{"version":3,"names":["axios","STATUS_CODE","BASE_URL","toast","METHOD","GET","POST","PUT","DELETE","API","constructor","isLoggedIn","userData","userToken","baseURL","get","url","data","Promise","resolve","reject","api","then","response","catch","error","console","post","put","delete","method","axiosConfig","headers","setHeaders","status","INTERNAL_SERVER_ERROR","_error$response","err","errData","log","errors","Accept","Authorization","localStorage","getItem","isMultipart","Object","assign"],"sources":["/home/actimize/Music/survey_app_original/app/javascript/API/API.js"],"sourcesContent":["import axios from \"axios\";\nimport { STATUS_CODE, BASE_URL } from \"./Constants\";\nimport { toast } from \"react-toastify\";\n\n// Request Methods\nconst METHOD = {\n  GET: \"get\",\n  POST: \"post\",\n  PUT: \"put\",\n  DELETE: \"delete\",\n};\n\n/*\n* API controller for handling the request\n*/\nclass API {\n  isLoggedIn = false;\n  userData = {};\n  userToken = null;\n\n  constructor() {\n    this.baseURL = BASE_URL;\n  }\n\n  get(url, data) {\n    return new Promise((resolve, reject) => {\n      this.api(METHOD.GET, url, data)\n        .then((response) => resolve(response))\n        .catch((error) => {\n          console.error(\"GET request error:\", error);\n          reject(error);\n        });\n    });\n  }\n\n  post(url, data) {\n    return new Promise((resolve, reject) => {\n      this.api(METHOD.POST, url, data)\n        .then((response) => resolve(response))\n        .catch((error) => {\n          console.error(\"POST request error:\", error);\n          reject(error);\n        });\n    });\n  }\n\n  put(url, data) {\n    return new Promise((resolve, reject) => {\n      this.api(METHOD.PUT, url, data)\n        .then((response) => resolve(response))\n        .catch((error) => {\n          console.error(\"PUT request error:\", error);\n          reject(error);\n        });\n    });\n  }\n\n  delete(url, data) {\n    return new Promise((resolve, reject) => {\n      this.api(METHOD.DELETE, url, data)\n        .then((response) => resolve(response))\n        .catch((error) => {\n          console.error(\"DELETE request error:\", error);\n          reject(error);\n        });\n    });\n  }\n\n  // Main function to hold the axios request params\n  api(method, url, data) {\n    return new Promise((resolve, reject) => {\n      let axiosConfig = {\n        method: method,\n        url: this.baseURL + url,\n        headers: this.setHeaders(data),\n      };\n\n      if (data) {\n        axiosConfig.data = data;\n      }\n\n      axios(axiosConfig)\n        .then((response) => {\n          if (response && response.status === STATUS_CODE.INTERNAL_SERVER_ERROR) {\n            toast.error(\"Something went wrong!!\");\n          } else {\n            resolve(response);\n            // Uncomment if you want to show a success toast\n            // if (response) {\n            //   toast.success(response.data?.messages);\n            // }\n          }\n        })\n        .catch((error) => {\n          let err = error?.response;\n          let errData = error?.response?.data;\n          console.error(\"ERROR\", error);\n\n          // Handle specific errors based on status or error messages\n          if (err?.status === 401) {\n            \n          } else if (err?.status === 422) {\n            console.log(`${error.response.data.errors}`);\n          } else {\n            console.log(\"An error occurred\");\n          }\n\n          reject(error);  // Ensure the error is propagated\n        });\n    });\n  }\n\n  // Set the headers for request\n  setHeaders(data) {\n    let headers = {\n      \"accept-language\": \"en\",\n      \"Content-Type\": \"application/json\",\n      Accept: \"application/json\",\n      Authorization: localStorage.getItem(\"token\"),\n    };\n\n    if (data) {\n      if (data.isMultipart) {\n        headers[\"Content-Type\"] = \"multipart/form-data\";\n      }\n      if (data.headers) {\n        Object.assign(headers, data.headers);\n      }\n    }\n\n    return headers;\n  }\n}\n\nexport default API;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}